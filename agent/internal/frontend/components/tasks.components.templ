package frontend

import (
	"time"
	"utils"
)

templ ReminderTasks(tasks []utils.Task) {
	for _, t := range tasks {
		<li>
			<div class="w-full bg-slate-700 inline-flex justify-between mb-1">
				<div class="px-2 w-1/2">
					<p class="font-extrabold text-lg p-2 m-1"><span class="text-sm"><i>title:</i></span> <span class="font-extrabold text-lg p-2">{ t.UI.Title }</span></p>
					<p class="font-bold"><span class="text-sm"><i>subtitle:</i></span> <span class="font-extrabold text-lg p-2">{ t.UI.Subtitle }</span></p>
					<details>
						<summary><span class="text-sm"><i>See attached note</i></span></summary>
						<p>{ t.UI.Notes }</p>
					</details>
					if t.Job == utils.ReminderWithAppLaunch {
						<div class="text-lg flex items-center gap-1">would launch: <img src={ getImageFilePath(t.AppName, t.Icon) } alt="" class="h-4 w-4"/> { t.AppName }</div>
					}
				</div>
				<div class="edit-and-alerts inline-flex w-full justify-end gap-4 align-baseline">
					<div>
						<img title="delete reminder" class="h-6 w-8 cursor-pointer hover:scale-125" src="/assets/svg/delete.svg" alt="delete" hx-post={ "/removeTask/" + t.UUID.String() } hx-swap="none" hx-select-oob="#task-holder:outerHTML"/>
						<img title="edit reminder" class="h-6 w-8 cursor-pointer hover:scale-125" src="/assets/svg/edit.svg" alt="delete"/>
					</div>
					<div>
						<p class="font-bold text-lg"><span class="font-bold text-lg"><i>Starts at:</i></span> <span class="font-bold">{ formatTimeToHumanReadable(t.Reminder.StartTime) }</span></p>
						if time.Now().Before(t.Reminder.StartTime.Add(intToDuration(-t.Reminder.AlertTimesInMinutes[0]))) {
							<p>
								<span class="font-bold text-lg"><i>reminder at:</i></span>
								<span class="font-bold">{ formatTimeToHumanReadable(t.Reminder.StartTime.Add(intToDuration(-t.Reminder.AlertTimesInMinutes[0]))) }</span>
							</p>
						}
						if time.Now().Before(t.Reminder.StartTime.Add(intToDuration(-t.Reminder.AlertTimesInMinutes[1]))) {
							<p>
								<span class="font-bold text-lg"><i>reminder at:</i></span>
								<span class="font-bold">{ formatTimeToHumanReadable(t.Reminder.StartTime.Add(intToDuration(-t.Reminder.AlertTimesInMinutes[1]))) }</span>
							</p>
						}
					</div>
				</div>
			</div>
		</li>
	}
}

templ AppLimitTasks(tasks []utils.Task) {
	for _, t := range  tasks {
		<li>
			<div class="limit-tasks">
				<div class="appInfo">
					<img src={ getImageFilePath(t.AppName, t.Icon) } alt={ t.AppName }/>
					<p>{ t.AppName }</p>
				</div>
				<div class="limitInfo">
					<p class="shade">{ utils.UsageTimeInHrsMin(t.TaskTime.AppLimit.Limit) }</p>
					<p hidden class="uuid">{ t.UUID.String() }</p>
					<div style="display: flex; gap: 1rem;">
						<img title="delete app limit" src="/assets/svg/delete.svg" alt="delete" hx-post={ "/removeTask/" + t.UUID.String() + "?taskType=AppLimit" } hx-swap="none" hx-select-oob="#task-holder:outerHTML"/>
						<img title="edit app limit" src="/assets/svg/edit-white.svg" alt="edit"/>
					</div>
				</div>
			</div>
		</li>
	}
}
